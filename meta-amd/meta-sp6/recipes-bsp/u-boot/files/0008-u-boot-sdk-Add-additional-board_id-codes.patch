From 2c2532816263e63282c2350fcdcb9e4ae5c51504 Mon Sep 17 00:00:00 2001
From: Vinu Vaghasia <vinu.vaghasia@amd.com>
Date: Wed, 18 Aug 2021 15:20:19 -0500
Subject: [PATCH 1/1] u-boot-sdk: Add additional board_id codes

Additional Genoa board_id based DTS selection added

Signed-off-by: Vinu Vaghasia <vinu.vaghasia@amd.com>
---
 common/image-fit.c | 42 +++++++++++++++++++++++++++---------------
 1 file changed, 27 insertions(+), 15 deletions(-)

diff --git a/common/image-fit.c b/common/image-fit.c
index db3d3ea961..08dcce0760 100644
--- a/common/image-fit.c
+++ b/common/image-fit.c
@@ -1847,21 +1847,33 @@ int fit_image_load(bootm_headers_t *images, ulong addr,
			board_id = ( (platform_id[0]-'0')*16 + (platform_id[1]-'0'));

			// select the  device tree configuration based on board_id
-			if ( board_id == 0x40 || board_id == 0x41 || board_id == 0x42 ) {
-				sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-onyx.dtb");
-			}
-			else if ( board_id == 0x43 || board_id == 0x44 || board_id == 0x45 ) {
-				sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-quartz.dtb");
-			}
-			else if ( board_id == 0x46 || board_id == 0x47 || board_id == 0x48 ) {
-				sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-ruby.dtb");
-			}
-			else if ( board_id == 0x49 || board_id == 0x4A || board_id == 0x4B ) {
-				sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-titanite.dtb");
-			}
-			else {
-				sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-onyx.dtb");
-			}
+			switch (board_id) {
+				case 0x3D:
+				case 0x40:
+				case 0x41:
+				case 0x42:
+				case 0x52:
+					sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-onyx.dtb"); break;
+				case 0x3E:
+				case 0x43:
+				case 0x44:
+				case 0x45:
+				case 0x51:
+					sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-quartz.dtb"); break;
+				case 0x46:
+				case 0x47:
+				case 0x48:
+					sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-ruby.dtb"); break;
+				case 0x49:
+				case 0x4A:
+				case 0x4B:
+				case 0x4C:
+				case 0x4D:
+				case 0x4E:
+					sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-titanite.dtb"); break;
+				default :
+					sprintf((char *)fit_uname_config, "conf-aspeed-bmc-amd-onyx.dtb"); break;
+			} // switch

			cfg_noffset = fit_conf_get_node(fit,
							fit_uname_config);
--
2.17.1

