From 281cffc705f83e1b7b37628894bb05086ac2fad6 Mon Sep 17 00:00:00 2001
From: mushtaqk <Mushtaq.Khan@amd.com>
Date: Wed, 11 Jan 2023 10:22:35 +0000
Subject: [PATCH] lpc-mode-config

---
 arch/arm/mach-aspeed/ast2600/board_common.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/arm/mach-aspeed/ast2600/board_common.c b/arch/arm/mach-aspeed/ast2600/board_common.c
index 53870dd71d..526a4b6b6b 100644
--- a/arch/arm/mach-aspeed/ast2600/board_common.c
+++ b/arch/arm/mach-aspeed/ast2600/board_common.c
@@ -90,6 +90,12 @@ __weak int board_init(void)
 		if (ret)
 			break;
 	}
+
+#define LPC_MODE (1 << 6)
+   u32 hwstrap2;
+   hwstrap2 = readl(ASPEED_HW_STRAP2);
+   hwstrap2 |= LPC_MODE;
+   writel(hwstrap2, ASPEED_HW_STRAP2);
 
 	return 0;
 }
--
2.17.1
