From c1f14ab06d76f065c4022d2350f6e45592847d70 Mon Sep 17 00:00:00 2001
From: Vinu Vaghasia <vinu.vaghasia@amd.com>
Date: Wed, 12 Jan 2022 13:43:13 -0600
Subject: [PATCH 1/1] ARM:dts:aspeed: Add Titanite dts adc121c sensors

adc121c voltage sensors are added with Titanite device tree

Signed-off-by: Vinu Vaghasia <vinu.vaghasia@amd.com>
---
 arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts | 31 ++++++++++++++++---
 1 file changed, 26 insertions(+), 5 deletions(-)

diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
index 8a6cb5286e1a..560631be5af2 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
@@ -43,6 +43,16 @@
 		};
 	};

+	iio-hwmon-adc121c {
+		compatible = "iio-hwmon";
+		oemname0 = "FPGA_VDD_CORE";
+		oemname1 = "FPGA_VDD_18";
+		oemname2 = "FPGA_VDD_33";
+		oemname3 = "LOM_VDD_33";
+		oemname4 = "LOM_VDD_12";
+		oemname5 = "VDD_12_DUAL";
+		io-channels = <&adc0 0>, <&adc1 0>, <&adc2 0>, <&adc4 0>, <&adc5 0>;
+	};
 };

 &mdio0 {
@@ -239,6 +249,7 @@
 						reg = <0x28>;
 					};
 				};
+
 				i2c@3 {
 					#address-cells = <1>;
 					#size-cells = <0>;
@@ -287,25 +298,35 @@
 			#size-cells = <0>;
 			reg = <2>;

-			adc121c@50 {
+			adc0: p1v0_aux@50 {
 				compatible = "ti,adc121c";
 				reg = <0x50>;
+				#io-channel-cells = <1>;
+				label = "p1v0_aux";
 			};
-			adc121c@51 {
+			adc1: p1v8_aux@51 {
 				compatible = "ti,adc121c";
 				reg = <0x51>;
+				#io-channel-cells = <1>;
+				label = "p1v8_aux";
 			};
-			adc121c@52 {
+			adc2: p3v3_aux@52 {
 				compatible = "ti,adc121c";
 				reg = <0x52>;
+				#io-channel-cells = <1>;
+				label = "p3v3_aux";
 			};
-			adc121c@55 {
+			adc4: p1v27_aux@55 {
 				compatible = "ti,adc121c";
 				reg = <0x55>;
+				#io-channel-cells = <1>;
+				label = "p1v27_aux";
 			};
-			adc121c@56 {
+			adc5: p12v_aux@56 {
 				compatible = "ti,adc121c";
 				reg = <0x56>;
+				#io-channel-cells = <1>;
+				label = "p12v_aux";
 			};
 		};
 	};
--
2.17.1

