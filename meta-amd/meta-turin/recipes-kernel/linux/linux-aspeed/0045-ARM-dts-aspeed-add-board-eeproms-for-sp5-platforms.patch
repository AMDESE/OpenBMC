From f8bbe710fcb07c38203aa80d239e45f37f5206a8 Mon Sep 17 00:00:00 2001
From: Rajaganesh Rathinasabapathi <Rajaganesh.Rathinasabapathi@amd.com>
Date: Wed, 29 Sep 2021 06:29:46 -0500
Subject: [PATCH] ARM:dts:aspeed add board eeproms for sp5 platforms

Signed-off-by: Rajaganesh Rathinasabapathi <Rajaganesh.Rathinasabapathi@amd.com>
---
 arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts     | 32 ++++++++++--
 arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts   | 50 ++++++++++++++++++-
 arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts     | 18 ++++++-
 arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts | 11 +++-
 4 files changed, 105 insertions(+), 6 deletions(-)

diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts b/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts
index 9898434161aa..c22cae19b5bc 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts
@@ -221,9 +221,35 @@
 	// Net name i2c7
 	status = "okay";

-	tca9548a@70 {
-	compatible = "nxp,pca9546";
-	reg = <0x70>;
+	i2cswitch@70 {
+		compatible = "nxp,pca9548";
+		reg = <0x70>;
+
+	};
+
+	i2cswitch@71 {
+		compatible = "nxp,pca9546";
+		reg = <0x71>;
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		i2c@0 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0>;
+
+			brdreveeprom@50 {
+				//ONYX BRD ID
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x50>;
+			};
+
+			scmbrdeeprom@51 {
+				//SCM BRD ID
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x51>;
+			};
+		};

 	};

diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts b/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts
index 4a5a18982a40..78057e2794a6 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts
@@ -440,11 +440,59 @@
 	status = "okay";

 	i2cswitch@70 {
-		compatible = "nxp,pca9546";
+		compatible = "nxp,pca9548";
 		reg = <0x70>;

 	};

+	i2cswitch@71 {
+		compatible = "nxp,pca9546";
+		reg = <0x71>;
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		i2c@0 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0>;
+
+			p0brdreveeprom@50 {
+				//P0 QUARTZ BRD ID
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x50>;
+			};
+
+			p0scmbrdeeprom@51 {
+				//P0 SCM BRD ID
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x51>;
+			};
+		};
+
+		i2c@1 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <1>;
+
+			p1brdreveeprom@50 {
+				//P1 QUARTZ BRD ID
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x50>;
+			};
+
+			p2scmbrdeeprom@51 {
+				//P1 SCM BRD ID
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x51>;
+			};
+		};
+	};
+
+	i2cswitch@72 {
+		compatible = "nxp,pca9546";
+		reg = <0x70>;
+	};
+
 };

 &i2c11 {
diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts b/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
index 8a77e990c478..9cf6699e5d1a 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
@@ -295,9 +295,25 @@
 	i2cswitch@71 {
 		compatible = "nxp,pca9548";
 		reg = <0x71>;
+		#address-cells = <1>;
+		#size-cells = <0>;

+		i2c@0 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0>;
+			// BRD ID eeprom
+			brdreveeprom@50 {
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x50>;
+			};
+			// SCM BRD ID eeprom
+			scmbrdeeprom@51 {
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x51>;
+			};
+		};
 	};
-
 };

 // BCM5720 LOM
diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
index dc7f58b8cc21..791bf4d57b0a 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
@@ -289,15 +289,24 @@
 	i2cswitch@70 {
 		compatible = "nxp,pca9548";
 		reg = <0x70>;
+		#address-cells = <1>;
+		#size-cells = <0>;

 		i2c@0 {
 			reg = <0>;
+			#address-cells = <1>;
+			#size-cells = <0>;

 			// BRD ID eeprom
-			mbeeprom@50 {
+			brdreveeprom@50 {
 				compatible = "microchip,24lc256","atmel,24c256";
 				reg = <0x50>;
 			};
+			// SCM BRD ID eeprom
+			scmbrdeeprom@51 {
+				compatible = "microchip,24lc256","atmel,24c256";
+				reg = <0x51>;
+			};
 		};
 	};

--
2.17.1

