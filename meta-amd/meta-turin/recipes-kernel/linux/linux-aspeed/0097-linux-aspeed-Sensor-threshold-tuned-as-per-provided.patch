From a66b5f8351509ea4ef0eacb2c15882302ef37562 Mon Sep 17 00:00:00 2001
From: Ashok Kumar <ashok2.kumar@amd.com>
Date: Wed, 27 Jul 2022 09:57:18 -0500
Subject: [PATCH] linux-aspeed: Sensor threshold tuned as per provided sheet

Sensor thresholds tuned for SP5 platforms
Fixes: PLAT-109003

Signed-off-by: Ashok Kumar <ashok2.kumar@amd.com>
---
 arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts     |  9 +----
 arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts | 38 +++++++++++++++++++
 2 files changed, 39 insertions(+), 8 deletions(-)

diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts b/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
index 0767a1f36d96..6917a85c11d7 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
@@ -62,11 +62,10 @@ iio-hwmon-adc121c {
 		oemname0 = "ADC121C_50";
 		oemname1 = "ADC121C_51";
 		oemname2 = "ADC121C_52";
-		oemname3 = "ADC121C_53";
 		oemname4 = "ADC121C_54";
 		oemname5 = "ADC121C_55";
 		oemname6 = "ADC121C_56";
-		io-channels = <&adc0 0>, <&adc1 0>, <&adc2 0>, <&adc3 0>,
+		io-channels = <&adc0 0>, <&adc1 0>, <&adc2 0>,
 					  <&adc4 0>, <&adc5 0>, <&adc6 0>;
 	};
 };
@@ -352,12 +351,6 @@ adc2: adc121c_52@52 {
 				#io-channel-cells = <1>;
 				label = "adc121c_52";
 			};
-			adc3: adc121c_53@53 {
-				compatible = "ti,adc121c";
-				reg = <0x53>;
-				#io-channel-cells = <1>;
-				label = "adc121c_53";
-			};
 			adc4: adc121c_54@54 {
 				compatible = "ti,adc121c";
 				reg = <0x54>;
diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
index 6e8304627ef5..9b7bad9d01a5 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
@@ -600,12 +600,50 @@ &i2c4 {
 &i2c5 {
 	// Net name i2c2 (SCM_I2C2)
 	status = "okay";
+       pvddcr_soc_p0@61 {
+           compatible = "isil,isl68137";
+           reg = <0x61>;
+       };
+       pvdd33_s5_p0@19 {
+           compatible = "isil,isl68137";
+           reg = <0x19>;
+       };
+       pvdd11_s3_p0@63 {
+           compatible = "isil,isl68137";
+           reg = <0x63>;
+       };
+       pvddio_p0@62 {
+           compatible = "isil,isl68137";
+           reg = <0x62>;
+       };
+       pvdd18_s5_p0@17 {
+           compatible = "isil,isl68137";
+           reg = <0x17>;
+       };
+
 };

 // Titanite P1 VRs
 &i2c6 {
 	// Net name i2c3 (SCM_I2C3)
 	status = "okay";
+       pvddcr_soc_p1@72 {
+           compatible = "isil,isl68137";
+           reg = <0x72>;
+       };
+       pvddio_p1@75 {
+           compatible = "isil,isl68137";
+           reg = <0x75>;
+       };
+       pvddcr_s3_p1@74 {
+           compatible = "isil,isl68137";
+           reg = <0x74>;
+       };
+       pvdd18_s5_p1@18 {
+           compatible = "isil,isl68137";
+           reg = <0x18>;
+       };
+
 };

 // HPM Board ID
