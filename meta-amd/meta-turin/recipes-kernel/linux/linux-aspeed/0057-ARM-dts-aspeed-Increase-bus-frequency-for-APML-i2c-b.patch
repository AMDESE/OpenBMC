From e9dbf5eeb57f6eab6d7e56f236297c2bd700bb4d Mon Sep 17 00:00:00 2001
From: Akshay Gupta <Akshay.Gupta@amd.com>
Date: Fri, 10 Dec 2021 10:13:27 +0000
Subject: [PATCH] ARM:dts:aspeed: Increase bus-frequency for APML i2c bus

- Increase APML i2c bus-frequency in Onyx/Quartz
  to 400kHz(from 100kHz)

Signed-off-by: Akshay Gupta <Akshay.Gupta@amd.com>
---
 arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts     | 1 +
 arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts   | 2 ++
 arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts     | 1 +
 arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts | 2 ++
 4 files changed, 6 insertions(+)

diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts b/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts
index 66910840f3a1..18a7d4773711 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-onyx.dts
@@ -582,6 +582,7 @@ spd5118_1_5: spd@55 {
 &i2c2 {
 	// P0 APML
 	status = "okay";
+	bus-frequency = <400000>;

 	sbtsi@4c {
 		compatible = "amd,sbtsi";
diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts b/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts
index e59a16e22c92..f52e45686972 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-quartz.dts
@@ -756,6 +756,7 @@ spd5118_3_5: spd@55 {
 &i2c2 {
 	// P0 APML
 	status = "okay";
+	bus-frequency = <400000>;

 	sbtsi@4c {
 		compatible = "amd,sbtsi";
@@ -771,6 +772,7 @@ sbrmi@3c {
 &i2c3 {
 	// P1 APML
 	status = "okay";
+	bus-frequency = <400000>;

 	sbtsi@48 {
 		compatible = "amd,sbtsi";
diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts b/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
index 9699147cf67c..0f0d9ef7f276 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-ruby.dts
@@ -150,6 +150,7 @@ i2cswitch@70 {
 &i2c2 {
 	// P0 APML - i2c10
 	status = "okay";
+	bus-frequency = <400000>;

 	sbtsi@4c {
 		compatible = "amd,sbtsi";
diff --git a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
index e9af777e4b5e..0cfd79bd2fb4 100644
--- a/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-amd-titanite.dts
@@ -133,6 +133,7 @@ &i2c1 {
 &i2c2 {
 	// P0 APML - i2c10
 	status = "okay";
+	bus-frequency = <400000>;

 	sbtsi@4c {
 		compatible = "amd,sbtsi";
@@ -149,6 +150,7 @@ sbrmi@3c {
 &i2c3 {
 	// P1 APML - i2c11
 	status = "okay";
+	bus-frequency = <400000>;

 	sbtsi@48 {
 		compatible = "amd,sbtsi";
--
2.25.1

